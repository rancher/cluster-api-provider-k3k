images:
  - name: ghcr.io/rancher/controller:dev
    loadBehavior: mustLoad
  - name: registry.k8s.io/cluster-api/cluster-api-controller:v1.10.5
    loadBehavior: tryLoad
  - name: registry.k8s.io/cluster-api/kubeadm-bootstrap-controller:v1.10.5
    loadBehavior: tryLoad
  - name: registry.k8s.io/cluster-api/kubeadm-control-plane-controller:v1.10.5
    loadBehavior: tryLoad
  - name: registry.k8s.io/cluster-api-helm/cluster-api-helm-controller:v0.3.2
    loadBehavior: tryLoad

providers:
  - name: cluster-api
    type: CoreProvider
    versions:
    - name: v1.10.5
      value: https://github.com/kubernetes-sigs/cluster-api/releases/download/v1.10.5/core-components.yaml
      type: url
      contract: v1beta1
      files:
      - sourcePath: "data/shared/v1beta1/metadata.yaml"
      replacements:
      - old: "imagePullPolicy: Always"
        new: "imagePullPolicy: IfNotPresent"

  - name: kubeadm
    type: BootstrapProvider
    versions:
    - name: v1.10.5
      value: https://github.com/kubernetes-sigs/cluster-api/releases/download/v1.10.5/bootstrap-components.yaml
      type: url
      contract: v1beta1
      files:
      - sourcePath: "data/shared/v1beta1/metadata.yaml"
      replacements:
      - old: "imagePullPolicy: Always"
        new: "imagePullPolicy: IfNotPresent"

  - name: kubeadm
    type: ControlPlaneProvider
    versions:
    - name: v1.10.5
      value: https://github.com/kubernetes-sigs/cluster-api/releases/download/v1.10.5/control-plane-components.yaml
      type: url
      contract: v1beta1
      files:
      - sourcePath: "data/shared/v1beta1/metadata.yaml"
      replacements:
      - old: "imagePullPolicy: Always"
        new: "imagePullPolicy: IfNotPresent"

  - name: "k3k"
    type: "InfrastructureProvider"
    versions:
      - name: "v0.0.0"
        value: "../../out/infrastructure-components.yaml"
        type: "url"
        files:
          - sourcePath: "../../metadata.yaml"
          - sourcePath: "../../templates/cluster-template.yaml"

variables:
  INFRASTRUCTURE_PROVIDER: "k3k"
  KUBERNETES_VERSION: "v1.31.1"
